# 오너 계정 권한 및 UI 문제 점검 리스트

## 문제 요약
1. 오너 계정이 로그인은 되지만 Firestore에 문서가 없음
2. 오너 계정이 데이터베이스 연결이 안됨 (사용자 불러오기, 상품 추가 등)
3. 관리자 모드에서 사용자/진행자 관리 권한이 제대로 작동하지 않음
4. 오너 계정과 관리자 계정이 동일한 UI를 사용해야 함

---

## 점검 항목

### ✅ 1. 오너 계정 Firestore 문서 생성
- [ ] 오너 계정 로그인 시 Firestore에 사용자 문서가 자동 생성되는지 확인
- [ ] 없으면 로그인 후 자동 생성 로직 추가

### ✅ 2. 오너 계정 클라이언트 사이드 인증
- [ ] `/admin/login`에서 `signInWithEmailAndPassword`로 Firebase Client SDK 로그인 확인
- [ ] 로그인 후 `auth.currentUser`가 설정되는지 확인
- [ ] `getCurrentUserProfile()`이 오너 계정도 반환하는지 확인

### ✅ 3. 사용자 목록 불러오기
- [ ] `getAllUsers()` 함수가 오너 계정에서 작동하는지 확인
- [ ] Firestore 보안 규칙에서 `isAdmin()`이 `owner` 역할도 포함하는지 확인
- [ ] 오너 계정의 Firestore 문서에 `role: 'owner'`가 설정되어 있는지 확인

### ✅ 4. 역할 변경 기능
- [ ] `updateUserRole()` 함수가 오너 계정에서 작동하는지 확인
- [ ] 오너가 `user`, `organizer`, `admin` 역할로 변경할 수 있는지 확인
- [ ] UI에서 역할 변경 버튼이 표시되는지 확인

### ✅ 5. 상품 관리 기능
- [ ] `getAllProducts()` 함수가 오너 계정에서 작동하는지 확인
- [ ] `createProduct()`, `updateProduct()`, `deleteProduct()` 함수가 작동하는지 확인
- [ ] Firestore 보안 규칙에서 `isAdmin()`이 상품 CRUD를 허용하는지 확인

### ✅ 6. 공동구매 건 관리
- [ ] `getAllGroups()` 함수가 오너 계정에서 작동하는지 확인
- [ ] 그룹 상태 변경 기능이 작동하는지 확인

### ✅ 7. UI 일관성
- [ ] 오너 계정과 관리자 계정이 동일한 UI를 사용하는지 확인
- [ ] 관리자 모드 배너가 오너 계정에서도 표시되는지 확인
- [ ] 역할별 기능 제한이 올바르게 적용되는지 확인

---

## 수정 필요 사항

### 1. 오너 계정 로그인 후 Firestore 문서 자동 생성
- 로그인 성공 후 Firestore에 사용자 문서가 없으면 자동 생성
- 또는 서버 사이드 API로 프로필 가져오기

### 2. `getCurrentUserProfile()` 수정
- 오너 계정도 처리하도록 수정
- 서버 사이드 세션 쿠키 기반으로 프로필 가져오기 옵션 추가

### 3. Firestore 보안 규칙 확인
- `isAdmin()` 함수가 `owner` 역할도 포함하는지 확인 (이미 포함되어 있음)
- 오너 계정의 Firestore 문서에 `role: 'owner'`가 설정되어 있는지 확인

### 4. 권한 체크 로직 확인
- 관리자 페이지에서 권한 체크가 올바르게 작동하는지 확인
- 오너 계정도 관리자 권한으로 처리되는지 확인
