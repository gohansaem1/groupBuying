# 카카오 로그인 invalid_scope 에러 해결

`invalid_scope: Invalid scope: account_email` 에러는 카카오 개발자 콘솔에서 이메일 동의 항목이 활성화되지 않았을 때 발생합니다.

---

## 문제 원인

코드에서 `account_email` scope를 요청했지만, 카카오 개발자 콘솔에서:
- 이메일 동의 항목이 비활성화되어 있거나
- 이메일이 필수 동의가 아닌 선택 동의로 설정되어 있을 때 발생합니다.

---

## 해결 방법 (2가지)

### 방법 1: 코드 수정 (권장)

이메일은 선택사항이므로, `account_email` scope를 제거하고 `profile_nickname`만 요청하도록 수정했습니다.

**이미 적용됨**: `lib/firebase/kakao.ts`에서 `scope: 'profile_nickname'`로 변경

이제 이메일 없이도 로그인이 가능하며, 이메일이 있으면 자동으로 가져옵니다.

---

### 방법 2: 카카오 개발자 콘솔에서 이메일 동의 항목 활성화

1. [카카오 개발자 콘솔](https://developers.kakao.com/) 접속
2. **내 애플리케이션** → 앱 선택
3. **카카오 로그인** 탭 → **동의항목** 클릭
4. **카카오계정(이메일)** 항목 찾기
5. **활성화** 또는 **필수 동의**로 설정
6. **저장** 클릭

이렇게 하면 `account_email` scope를 사용할 수 있습니다.

---

## 적용한 수정

코드에서 `scope` 파라미터를 완전히 제거했습니다. 카카오 SDK v1.43.6에서는 scope를 명시하지 않으면 기본 권한만 요청합니다.

이제:
- 닉네임과 프로필 사진은 기본 권한으로 자동 가져옴
- 이메일은 카카오 계정에 있고 동의 항목이 활성화되어 있으면 자동으로 가져옴
- 이메일이 없어도 로그인 가능

---

## 확인

1. 서버 재시작 (`npm run dev` 중지 후 다시 시작)
2. 브라우저 새로고침 (Ctrl + F5)
3. 카카오 로그인 버튼 클릭
4. 에러가 해결되었는지 확인

---

## 참고

- `profile_nickname`: 닉네임 (필수)
- `account_email`: 이메일 (선택, 동의 항목 활성화 필요)

이메일이 필수가 아니라면 방법 1(코드 수정)을 사용하는 것이 더 간단합니다.
