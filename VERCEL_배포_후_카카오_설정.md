# Vercel 배포 후 카카오 로그인 설정 변경 가이드

## 📋 개요
Vercel에 배포한 후, 카카오 개발자 콘솔에서 배포된 도메인을 등록해야 카카오 로그인이 정상 작동합니다.

---

## 🔧 설정 단계

### 1. 배포된 도메인 확인
Vercel 대시보드에서 배포된 도메인을 확인하세요.
- 예: `https://group-buying-nine.vercel.app`
- 또는 커스텀 도메인: `https://yourdomain.com`

---

### 2. 카카오 개발자 콘솔 접속
1. [카카오 개발자 콘솔](https://developers.kakao.com/) 접속
2. 로그인 후 **내 애플리케이션** 선택
3. 해당 앱 선택 (예: "제주 공동구매")

---

### 3. 플랫폼 설정 변경

#### 3-1. Web 플랫폼 추가/수정
1. **앱 설정** → **플랫폼** 메뉴로 이동
2. **Web 플랫폼 등록** 클릭 (이미 있으면 수정)
3. **사이트 도메인**에 배포된 도메인 추가:
   ```
   group-buying-nine.vercel.app
   ```
   또는 커스텀 도메인:
   ```
   yourdomain.com
   ```
   ⚠️ **주의**: `https://`는 제외하고 도메인만 입력

---

### 4. 카카오 로그인 Redirect URI 설정

1. **제품 설정** → **카카오 로그인** 메뉴로 이동
2. **Redirect URI** 섹션에서 **URI 추가** 클릭
3. 다음 URI들을 추가:
   ```
   https://group-buying-nine.vercel.app/login
   ```
   또는 커스텀 도메인:
   ```
   https://yourdomain.com/login
   ```
4. **저장** 클릭

---

### 5. 동의항목 확인

1. **제품 설정** → **카카오 로그인** → **동의항목** 메뉴로 이동
2. 다음 항목들이 **활성화**되어 있는지 확인:
   - ✅ **닉네임** (필수)
   - ✅ **이메일** (선택사항, 사용하지 않으면 비활성화 가능)

---

### 6. JavaScript 키 확인

1. **앱 설정** → **앱 키** 메뉴로 이동
2. **JavaScript 키** 확인
3. Vercel 환경 변수에 `NEXT_PUBLIC_KAKAO_JS_KEY`가 올바르게 설정되어 있는지 확인:
   - Vercel 대시보드 → 프로젝트 → Settings → Environment Variables

---

## ✅ 설정 완료 체크리스트

- [ ] 배포된 도메인 확인 완료
- [ ] 카카오 개발자 콘솔에서 Web 플랫폼에 사이트 도메인 추가 완료
- [ ] Redirect URI에 `https://your-domain.vercel.app/login` 추가 완료
- [ ] 동의항목 활성화 확인 완료
- [ ] Vercel 환경 변수에 `NEXT_PUBLIC_KAKAO_JS_KEY` 설정 확인 완료

---

## 🐛 문제 해결

### 에러: "잘못된 요청 (KOE205)"
- **원인**: Redirect URI가 등록되지 않았거나 도메인이 일치하지 않음
- **해결**: 
  1. 카카오 개발자 콘솔에서 Redirect URI 확인
  2. 정확한 도메인과 경로가 일치하는지 확인 (`/login` 포함)

### 에러: "invalid_scope"
- **원인**: 동의항목이 활성화되지 않음
- **해결**: 카카오 개발자 콘솔 → 동의항목에서 필요한 항목 활성화

### 에러: "팝업이 열리지 않음"
- **원인**: 사이트 도메인이 등록되지 않음
- **해결**: 카카오 개발자 콘솔 → 플랫폼 → Web → 사이트 도메인에 배포된 도메인 추가

---

## 📝 참고사항

1. **변경사항 반영 시간**: 카카오 개발자 콘솔 설정 변경 후 즉시 반영됩니다.

2. **로컬 개발 환경**: 
   - 로컬 개발 시에는 `http://localhost:3000`을 별도로 등록해야 합니다.
   - 배포 환경과 로컬 환경은 각각 다른 Redirect URI를 사용합니다.

3. **HTTPS 필수**: 
   - Vercel은 자동으로 HTTPS를 제공합니다.
   - 카카오 로그인은 HTTPS 환경에서만 작동합니다.

4. **환경 변수 확인**:
   - Vercel 대시보드에서 모든 환경 변수가 올바르게 설정되었는지 확인하세요.
   - 특히 `NEXT_PUBLIC_KAKAO_JS_KEY`가 올바른지 확인하세요.

---

## 🔄 설정 후 테스트

1. 배포된 사이트 접속: `https://group-buying-nine.vercel.app`
2. 로그인 페이지로 이동: `https://group-buying-nine.vercel.app/login`
3. 카카오 로그인 버튼 클릭
4. 카카오 로그인 팝업이 정상적으로 열리는지 확인
5. 로그인 후 리다이렉트가 정상적으로 작동하는지 확인

---

## 📞 추가 도움말

문제가 계속되면:
1. 브라우저 콘솔(F12)에서 에러 메시지 확인
2. Vercel 함수 로그 확인 (Vercel 대시보드 → Functions)
3. 카카오 개발자 콘솔의 **앱 설정** → **앱 키**에서 JavaScript 키 확인
